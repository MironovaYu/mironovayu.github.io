{% extends "admin/base.html" %}
{% block title %}–£—Å–ª—É–≥–∏ ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %}

{% block admin_content %}
<div class="admin-page">
    <div class="admin-page__header">
        <h1>–°—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–£—Å–ª—É–≥–∏¬ª</h1>
        <p>–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥, —Ü–µ–Ω—ã –∏ CTA</p>
    </div>

    <form method="POST" class="admin-form">

        <!-- ‚ïê‚ïê‚ïê Page Header ‚ïê‚ïê‚ïê -->
        <div class="admin-form__section">
            <h3>üìã –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
            <div class="admin-field">
                <label for="page_label">–ú–µ—Ç–∫–∞</label>
                <input type="text" id="page_label" name="page_label" value="{{ content.services_page.label }}">
            </div>
            <div class="admin-field">
                <label for="page_title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" id="page_title" name="page_title" value="{{ content.services_page.title }}">
            </div>
            <div class="admin-field">
                <label for="page_subtitle">–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <textarea id="page_subtitle" name="page_subtitle" rows="2">{{ content.services_page.subtitle }}</textarea>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê Services ‚ïê‚ïê‚ïê -->
        {% for svc in content.services_page.services %}
        {% set svc_idx = loop.index0 %}
        <div class="admin-form__section">
            <h3>üîπ {{ svc.title }}</h3>
            <div class="admin-field">
                <label>ID (—è–∫–æ—Ä—å –¥–ª—è —Å—Å—ã–ª–æ–∫) <small style="color:#999">–õ–∞—Ç–∏–Ω–∏—Ü–∞ –∏ –¥–µ—Ñ–∏—Å—ã, –Ω–∞–ø—Ä. consultation</small></label>
                <input type="text" name="svc_{{ svc_idx }}_id" value="{{ svc.id|default('', true) }}">
            </div>
            <div class="admin-field">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" name="svc_{{ svc_idx }}_title" value="{{ svc.title }}">
            </div>
            <div class="admin-field">
                <label>–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" name="svc_{{ svc_idx }}_desc" value="{{ svc.desc }}">
            </div>
            <div class="admin-field">
                <label>–ò–∫–æ–Ω–∫–∞ <small style="color:#999">Font Awesome –∫–ª–∞—Å—Å, –Ω–∞–ø—Ä.: fa-solid fa-comments</small></label>
                <input type="text" name="svc_{{ svc_idx }}_icon" value="{{ svc.icon|default('', true) }}">
            </div>
            <div class="admin-field-row">
                <div class="admin-field" style="flex:1">
                    <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
                    <input type="text" name="svc_{{ svc_idx }}_duration" value="{{ svc.duration|default('', true) }}" placeholder="60 –º–∏–Ω—É—Ç">
                </div>
                <div class="admin-field" style="flex:1">
                    <label>–§–æ—Ä–º–∞—Ç</label>
                    <input type="text" name="svc_{{ svc_idx }}_format" value="{{ svc.format|default('', true) }}" placeholder="–û—á–Ω–æ / –û–Ω–ª–∞–π–Ω">
                </div>
            </div>
            <div class="admin-field">
                <label>–î–ª—è –∫–æ–≥–æ <small style="color:#999">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏</small></label>
                <textarea name="svc_{{ svc_idx }}_for_whom" rows="2">{{ svc.for_whom|default('', true) }}</textarea>
            </div>

            <h4>–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</h4>
            <div id="svcHighlights_{{ svc_idx }}">
                {% for h in svc.get('highlights', []) %}
                <div class="admin-field admin-field--removable">
                    <input type="text" name="svc_{{ svc_idx }}_highlight" value="{{ h }}">
                    <button type="button" class="admin-btn admin-btn--sm admin-btn--danger" onclick="this.parentElement.remove()">‚úï</button>
                </div>
                {% endfor %}
            </div>
            <button type="button" class="admin-btn admin-btn--outline" onclick="addSvcHighlight({{ svc_idx }})">+ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ</button>

            <h4>–¶–µ–Ω—ã</h4>
            {% for price in svc.prices %}
            <div class="admin-field-row">
                <input type="text" name="svc_{{ svc_idx }}_price_label" value="{{ price.label }}" placeholder="–ú–µ—Ç–∫–∞">
                <input type="text" name="svc_{{ svc_idx }}_price_value" value="{{ price.value }}" placeholder="–¶–µ–Ω–∞">
            </div>
            {% endfor %}

            <h4>–û–ø–∏—Å–∞–Ω–∏–µ (–ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã)</h4>
            <div id="svcParas_{{ svc_idx }}">
                {% for p in svc.paragraphs %}
                <div class="admin-field admin-field--removable">
                    <textarea name="svc_{{ svc_idx }}_paragraph" rows="3">{{ p }}</textarea>
                    <button type="button" class="admin-btn admin-btn--sm admin-btn--danger" onclick="this.parentElement.remove()">‚úï</button>
                </div>
                {% endfor %}
            </div>
            <button type="button" class="admin-btn admin-btn--outline" onclick="addSvcPara({{ svc_idx }})">+ –ü–∞—Ä–∞–≥—Ä–∞—Ñ</button>

            {% if svc.list_title is defined or svc.list_items is defined %}
            <h4 style="margin-top: 1rem;">–°–ø–∏—Å–æ–∫</h4>
            <div class="admin-field">
                <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ø–∏—Å–∫–∞</label>
                <input type="text" name="svc_{{ svc_idx }}_list_title" value="{{ svc.list_title|default('', true) }}">
            </div>
            <div id="svcList_{{ svc_idx }}">
                {% for li in svc.get('list_items', []) %}
                <div class="admin-field admin-field--removable">
                    <input type="text" name="svc_{{ svc_idx }}_list_item" value="{{ li }}">
                    <button type="button" class="admin-btn admin-btn--sm admin-btn--danger" onclick="this.parentElement.remove()">‚úï</button>
                </div>
                {% endfor %}
            </div>
            <button type="button" class="admin-btn admin-btn--outline" onclick="addSvcListItem({{ svc_idx }})">+ –ü—É–Ω–∫—Ç —Å–ø–∏—Å–∫–∞</button>
            {% endif %}
        </div>
        {% endfor %}

        <!-- ‚ïê‚ïê‚ïê CTA ‚ïê‚ïê‚ïê -->
        <div class="admin-form__section">
            <h3>üì¢ CTA-—Å–µ–∫—Ü–∏—è</h3>
            <div class="admin-field">
                <label for="cta_title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" id="cta_title" name="cta_title" value="{{ content.services_page.cta.title }}">
            </div>
            <div class="admin-field">
                <label for="cta_text">–¢–µ–∫—Å—Ç</label>
                <textarea id="cta_text" name="cta_text" rows="2">{{ content.services_page.cta.text }}</textarea>
            </div>
            <div class="admin-field">
                <label for="cta_button_text">–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏</label>
                <input type="text" id="cta_button_text" name="cta_button_text" value="{{ content.services_page.cta.button_text }}">
            </div>
        </div>

        <button type="submit" class="admin-btn admin-btn--primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </form>
</div>

<script>
function addSvcPara(idx) {
    const container = document.getElementById('svcParas_' + idx);
    const div = document.createElement('div');
    div.className = 'admin-field admin-field--removable';
    div.innerHTML = '<textarea name="svc_' + idx + '_paragraph" rows="3" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–∞–≥—Ä–∞—Ñ..."></textarea><button type="button" class="admin-btn admin-btn--sm admin-btn--danger" onclick="this.parentElement.remove()">‚úï</button>';
    container.appendChild(div);
}

function addSvcListItem(idx) {
    const container = document.getElementById('svcList_' + idx);
    const div = document.createElement('div');
    div.className = 'admin-field admin-field--removable';
    div.innerHTML = '<input type="text" name="svc_' + idx + '_list_item" placeholder="–ù–æ–≤—ã–π –ø—É–Ω–∫—Ç..."><button type="button" class="admin-btn admin-btn--sm admin-btn--danger" onclick="this.parentElement.remove()">‚úï</button>';
    container.appendChild(div);
}

function addSvcHighlight(idx) {
    const container = document.getElementById('svcHighlights_' + idx);
    const div = document.createElement('div');
    div.className = 'admin-field admin-field--removable';
    div.innerHTML = '<input type="text" name="svc_' + idx + '_highlight" placeholder="–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ..."><button type="button" class="admin-btn admin-btn--sm admin-btn--danger" onclick="this.parentElement.remove()">‚úï</button>';
    container.appendChild(div);
}
</script>
{% endblock %}

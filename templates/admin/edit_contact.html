{% extends "admin/base.html" %}
{% block title %}–ö–æ–Ω—Ç–∞–∫—Ç—ã ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %}

{% block admin_content %}
<div class="admin-page">
    <div class="admin-page__header">
        <h1>–°—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–ö–æ–Ω—Ç–∞–∫—Ç—ã¬ª</h1>
        <p>–ó–∞–≥–æ–ª–æ–≤–æ–∫, –æ–ø–∏—Å–∞–Ω–∏–µ, –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø–∏—Å–∏ –∏ CTA</p>
    </div>

    <form method="POST" class="admin-form">

        <!-- ‚ïê‚ïê‚ïê Page Header ‚ïê‚ïê‚ïê -->
        <div class="admin-form__section">
            <h3>üí¨ –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
            <div class="admin-field">
                <label for="label">–ú–µ—Ç–∫–∞</label>
                <input type="text" id="label" name="label" value="{{ content.contact_page.label }}">
            </div>
            <div class="admin-field">
                <label for="title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" id="title" name="title" value="{{ content.contact_page.title }}">
            </div>
            <div class="admin-field">
                <label for="subtitle">–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <textarea id="subtitle" name="subtitle" rows="3">{{ content.contact_page.subtitle }}</textarea>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê Process ‚ïê‚ïê‚ïê -->
        <div class="admin-form__section">
            <h3>üìã –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–ø–∏—Å–∏</h3>
            <div class="admin-field">
                <label for="process_label">–ú–µ—Ç–∫–∞ —Å–µ–∫—Ü–∏–∏</label>
                <input type="text" id="process_label" name="process_label" value="{{ content.contact_page.process.label }}">
            </div>
            <div class="admin-field">
                <label for="process_title">–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏</label>
                <input type="text" id="process_title" name="process_title" value="{{ content.contact_page.process.title }}">
            </div>
            <div id="contactSteps">
            {% for step in content.contact_page.process.steps %}
            <div class="admin-form__section admin-form__section--nested" data-contact-step>
                <div class="admin-section-header">
                    <h4>–®–∞–≥ {{ loop.index }}</h4>
                    <button type="button" class="admin-btn admin-btn--sm admin-btn--danger" onclick="this.closest('[data-contact-step]').remove()">‚úï</button>
                </div>
                <div class="admin-field">
                    <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                    <input type="text" name="step_title" value="{{ step.title }}">
                </div>
                <div class="admin-field">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea name="step_text" rows="2">{{ step.text }}</textarea>
                </div>
            </div>
            {% endfor %}
            </div>
            <button type="button" class="admin-btn admin-btn--outline" onclick="addContactStep()">+ –®–∞–≥</button>
        </div>

        <!-- ‚ïê‚ïê‚ïê CTA ‚ïê‚ïê‚ïê -->
        <div class="admin-form__section">
            <h3>üì¢ CTA-—Å–µ–∫—Ü–∏—è</h3>
            <div class="admin-field">
                <label for="cta_title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" id="cta_title" name="cta_title" value="{{ content.contact_page.cta.title }}">
            </div>
            <div class="admin-field">
                <label for="cta_text">–¢–µ–∫—Å—Ç</label>
                <textarea id="cta_text" name="cta_text" rows="2">{{ content.contact_page.cta.text }}</textarea>
            </div>
            <div class="admin-field">
                <label for="cta_button_text">–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏</label>
                <input type="text" id="cta_button_text" name="cta_button_text" value="{{ content.contact_page.cta.button_text }}">
            </div>
        </div>

        <button type="submit" class="admin-btn admin-btn--primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </form>
</div>

<script>
function addContactStep() {
    var container = document.getElementById('contactSteps');
    var num = container.querySelectorAll('[data-contact-step]').length + 1;
    var div = document.createElement('div');
    div.className = 'admin-form__section admin-form__section--nested';
    div.setAttribute('data-contact-step', '');
    div.innerHTML = '<div class="admin-section-header"><h4>–®–∞–≥ ' + num + '</h4><button type="button" class="admin-btn admin-btn--sm admin-btn--danger" onclick="this.closest(\'[data-contact-step]\').remove()">‚úï</button></div>'
        + '<div class="admin-field"><label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label><input type="text" name="step_title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ —à–∞–≥–∞"></div>'
        + '<div class="admin-field"><label>–û–ø–∏—Å–∞–Ω–∏–µ</label><textarea name="step_text" rows="2" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–∞..."></textarea></div>';
    container.appendChild(div);
}
</script>
{% endblock %}
